//
//  GameScene.swift
//  Malware Mind
//
//  Created by JÃ©ssica Araujo on 15/03/21.
//

import Foundation
import SpriteKit
import GameplayKit


class GameScene: SKScene {
    
    //MARK: - Entities
    let antivirus = Antivirus()
    //MARK: - Control Components
    //MARK: - Gestures
    //MARK: - SKScene Life-Cycle
    
    override func didMove(to view: SKView) {
        
        self.backgroundColor = .brown
        self.setupNodesPosition()
    }
    
    //MARK: - Adding Nodes to Scene
    
    func setupNodesPosition() {
        
        guard let antivirusSpriteNode = antivirus.component(ofType: AnimatedSpriteComponent.self)?.spriteNode else {return}
        
        guard let tileSet = SKTileSet(named: "Background") else {
            // hint: don't use the filename for named, use the tileset inside
            fatalError()
        }

        let tileSize = tileSet.defaultTileSize // from image size
        let tileMap = SKTileMapNode(tileSet: tileSet, columns: 5, rows: 5, tileSize: tileSize)
        let tileGroup = tileSet.tileGroups.first
         // fill or set by column/row
        //tileMap.setTileGroup(tileGroup, forColumn: 5, row: 5)
        
        for column in 0...4 {
            for row in 0...4 {
                tileMap.setTileGroup(tileGroup, forColumn: column, row: row)
                tileMap.fill(with: tileGroup)
            }
        }
        
        antivirusSpriteNode.position = CGPoint(x: self.frame.midX, y: self.frame.midY)
        
        self.addChild(tileMap)
        self.addChild(antivirusSpriteNode)
    }
}
