//
//  MenuViewController.swift
//  Malware Mind
//
//  Created by Alley Pereira on 15/03/21.
//

import Foundation
import SpriteKit

class MenuViewController: UIViewController {
    
    // MARK: - Elements 
    let menuContentView = MenuView()
    
    var stateMachine: GameStateMachine?
    
    override func viewDidLoad() {
        
        super.viewDidLoad()
        setup()
        stateMachine = GameStateMachine(controller: self, states: [PausedState(), PlayState(), ResumeState(), GameOverState(), RestartState()])
    }
    
    private func setup() {
        
        self.view = menuContentView
        setNavBarHidden()
        addButtonsTarget()
    }
    
    private func setNavBarHidden() {
        
        self.navigationController?.navigationBar.isTranslucent = true
        self.navigationController?.navigationBar.shadowImage = UIImage()
        self.navigationController?.navigationBar.setBackgroundImage(UIImage(), for: .default)
    }
    
    private func addButtonsTarget() {
        
        menuContentView.playButton.addTarget(self, action: #selector(startGame), for: .touchUpInside)
        menuContentView.wikiButton.addTarget(self, action: #selector(showWikiViewController), for: .touchUpInside)
        menuContentView.settingsButton.addTarget(self, action: #selector(showSettingsViewController), for: .touchUpInside)
    }
    
    @objc func startGame() {
        stateMachine?.enter(PlayState.self)
    }
    
    @objc func showWikiViewController() {
        print("showing the wiki view controller")
    }
    
    @objc func showSettingsViewController() {
        print("showing the settings view controller")
    }
}
